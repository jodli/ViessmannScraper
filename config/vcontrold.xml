<?xml version="1.0"?>
<V-Control xmlns:vcontrol="http://www.openv.de/vcontrol">
  <unix>
    <config>
      <serial>
        <tty>/dev/ttyUSB0</tty>
      </serial>
      <net>
        <port>3003</port>
        <allow ip="127.0.0.1"/>
      </net>
      <logging>
        <file>/tmp/vcontrold.log</file>
        <syslog>n</syslog>
        <debug>y</debug>
      </logging>
      <device ID="20C8"/>
    </config>
  </unix>
  <units>
    <unit name='Temperature' >
      <abbrev>TD</abbrev>
      <calc get='V/10'/>
      <type>short</type>
      <entity>C</entity>
    </unit>
    <unit name='Status' >
      <abbrev>E_ST</abbrev>
      <type>enum</type>
      <enum bytes='00' text='AUS'/>
      <enum bytes='01' text='EIN'/>
      <enum text='UNKNOWN'/>
    </unit>
<!--   <unit name='Betriebsart' >
      <abbrev>E_BA4</abbrev>
      <type>enum</type>
      <enum bytes='00' text='Abschalt'/>
      <enum bytes='01' text='Nur WW'/>
      <enum bytes='02' text='Heizen und WW'/>
      <enum bytes='03' text='Dauernd Reduziert'/>
      <enum bytes='04' text='Dauernd Normal'/>
      <enum text='UNKNOWN'/>
    </unit>
    <unit name='Stunden' >
      <abbrev>HS</abbrev>
      <calc get='V/3600' set='V*3600'/>
      <type>uint</type>
      <entity>Stunden</entity>
    </unit>
    <unit name='Funktion' >
      <abbrev>X</abbrev>
      <type></type>
    </unit>
    <unit name='Anzahl' >
      <abbrev>CO</abbrev>
      <calc get='V' set=''/>
      <type>int</type>
    </unit>
    <unit name='Temperatur' >
      <abbrev>TD</abbrev>
      <calc get='V/10' set='V*10'/>
      <type>short</type>
      <entity>Grad Celsius</entity>
    </unit>
    <unit name='Flamme' >
      <abbrev>B_STF</abbrev>
      <calc get='B2 &amp; (0x01&lt;&lt;BP) &gt;&gt; BP' set=''/>
      <type>uchar</type>
      <enum bytes='00' text='AUS'/>
      <enum bytes='01' text='EIN'/>
      <enum text='UNKNOWN'/>
    </unit>
    <unit name='Verriegelung' >
      <abbrev>B_STV</abbrev>
      <calc get='B1 &amp; (0x01&lt;&lt;BP) &gt;&gt; BP' set=''/>
      <type>uchar</type>
      <enum bytes='00' text='inaktiv'/>
      <enum bytes='01' text='aktiv'/>
      <enum text='UNKNOWN'/>
    </unit>
    <unit name='Prozent' >
      <abbrev>PC</abbrev>
      <calc get='V' set='V'/>
      <type>uchar</type>
      <entity>Prozent</entity>
    </unit>
    <unit name='FerienBetrieg' >
      <abbrev>B_FB</abbrev>
      <calc get='B7 &amp; (0x01&lt;&lt;BP) &gt;&gt; BP' set=''/>
      <type>uchar</type>
      <enum bytes='00' text='inaktiv'/>
      <enum bytes='01' text='aktiv'/>
      <enum text='UNKNOWN'/>
    </unit>
    <unit name='FrostWarnung' >
      <abbrev>B_FW</abbrev>
      <calc get='B7 &amp; (0x01&lt;&lt;BP) &gt;&gt; BP' set=''/>
      <type>uchar</type>
      <enum bytes='00' text='inaktiv'/>
      <enum bytes='01' text='aktiv'/>
      <enum text='UNKNOWN'/>
    </unit>-->
    <unit name='StatusUmschaltVentil' >
      <abbrev>E_STUV2</abbrev>
      <type>enum</type>
      <enum bytes='00' text='undefiniert'/>
      <enum bytes='01' text='Heizbetrieb'/>
      <enum bytes='02' text='Mittelstellung'/>
      <enum bytes='03' text='Warmwasserbetreitung'/>
      <enum text='UNKNOWN'/>
    </unit>
      <unit name='SystemTime'>
      <abbrev>TI</abbrev>
      <type>systime</type>
    </unit>
  </units>
  <protocols>
    <protocol name='KW2'>
      <macros>
        <macro name='SYNC'>
          <command>SEND 04;WAIT 05</command>
        </macro>
        <macro name='GETADDR'>
          <command>SEND 01 F7</command>
        </macro>
        <macro name='SETADDR'>
          <command>SEND 01 F4</command>
        </macro>
      </macros>
      <commands>
        <command name="getaddr">
          <send>SYNC;GETADDR $addr $hexlen;RECV $len $unit</send>
        </command>
        <command name="setaddr">
          <send>SYNC;SETADDR $addr $hexlen;SEND BYTES $unit;RECV 1 SR</send>
        </command>
      </commands>
    </protocol>
  </protocols>
  <extern xmlns:xi="http://www.w3.org/2003/XInclude">
    <xi:include href="vito.xml" parse="xml"/>
  </extern>
</V-Control>
